<div class="flex h-screen w-full overflow-hidden relative">
  <!-- Nút hiện panel khi bị ẩn - cố định dưới bên trái -->
  <button *ngIf="isLeftPanelHidden()"
    class="fixed bottom-4 left-4 z-50 w-10 h-10 bg-[#2238df] text-white rounded-full shadow-lg flex items-center justify-center hover:bg-[#1a2bc4] transition-colors"
    (click)="onShowLeftPanel()" type="button" title="Hiện panel trái">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
    </svg>
  </button>

  <!-- Panel bên trái có thể resize -->
  <div class="bg-gray-100 border-r border-gray-300 overflow-auto transition-all duration-300"
    [style.width.px]="isLeftPanelHidden() ? 0 : leftPanelWidth()" [style.min-width.px]="isLeftPanelHidden() ? 0 : 200"
    [style.max-width.px]="isLeftPanelHidden() ? 0 : 800" [style.overflow]="'hidden'">
    <app-widget [widgets]="widgets()" (toggleHide)="onToggleLeftPanel()" (widthChange)="onLeftPanelWidthChange($event)"
      (modeChange)="onPreviewModeChange($event)" (widgetsReorder)="onWidgetsReorder($event)"></app-widget>
  </div>

  <!-- Resize handle -->
  <div class="bg-gray-300 hover:bg-blue-500 cursor-col-resize transition-colors relative group" style="width: 1.33px;"
    [class.hidden]="isLeftPanelHidden()" (mousedown)="startResize($event)">
    <div
      class="absolute inset-y-0 left-1/2 -translate-x-1/2 bg-blue-500 opacity-0 group-hover:opacity-100 transition-all"
      style="width: 1.33px;">
    </div>
  </div>

  <!-- Panel bên phải -->
  <div class="flex-1 bg-white overflow-auto">
    <app-preview [widgets]="widgets()"></app-preview>
  </div>
</div>